/*
document.addEventListener("deviceready", function() {
  ActivityIndicator.show("Galeri yükleniyor, lütfen bekleyin");
  cordova.plugins.photoLibrary.requestAuthorization(function() {
    readLibrary();
  },function(err) {
    console.log(err);
  });
});
function readLibrary() {
  var st=new Date().getTime();
  cordova.plugins.photoLibrary.getLibrary(function(res){
    var et=new Date().getTime();
    var diff=et-st;
    alert(diff);
    ActivityIndicator.hide();
    var library=res.library;
    var length=library.length;
    library.forEach(function(libraryItem){
      var st=new Date().getTime();
      image = "<div class='imgHolder'><img height='100px' class='img' width='100px' src='"+libraryItem.thumbnailURL+"' style='margin: 5px' /></div>";
      $(image).appendTo($("#images"));
    });
      var et=new Date().getTime();
      var diff=et-st;
      alert(diff);
  },function(err) {
    console.error(err);ß
  });
}
document.addEventListener("deviceready", function() {
  window.resolveLocalFileSystemURL(cordova.file.externalRootDirectory, onSuccess,onFail);
});

function onSuccess(fileSystem) {
  window.console.log(cordova.file.externalRootDirectory);
  var directoryReader = fileSystem.createReader();
  directoryReader.readEntries(function(entries) {
    var i;
    for (i = 0; i<entries.length; i++) {
      if (entries[i].name == "DCIM") {
        var dcimReader = entries[i].createReader();
        cimReader.readEntries(onGetDCIM, onFail);
        break;
      }
    }
  }, function() {
    window.console.log('failed');
  })
}

function onFail() {
  console.log('failed');
}

function onGetDCIM(entries) {
    var i;
    for (i = 0; i<entries.length; i++) {
      if (entries[i].name == "100MEDIA") {
        var mediaReader = entries[i].createReader();
        mediaReader.readEntries(onGetFileNames, onFail);
        break;
      }
    }
  }, function() {
    window.console.log('failed');
  })
}

function onGetFileNames(entries) {
  var i;
  for (var i = 0; i < entries.length; i++) {
    console.log(entries[i].name);
  }
}
*/
/*
document.addEventListener("deviceready", function() {
  var platform = device.platform;
  if (platform == "Android") {
    document.addEventListener("deviceready", function() {
      cordova.plugins.photoLibrary.getLibrary(function(res) {
        var library = res.library;
        library.forEach(function(libraryItem) {
          var st=new Date().getTime();
          image = "<div class='imgHolder'><img class='img' src='"+libraryItem.thumbnailURL+"' style='margin: 5px' /></div>";
          $(image).appendTo($("#images"));
        })
      }, function(err) {
        console.log('failed');
      }, {
        thumbnailHeight:100,
        thumbnailWidth:100,
        quality:1,
        includeAlbumData:false,
      })
    })
  } else if (platform == "iOS") {
    */
    document.addEventListener("deviceready", function() {
      Photos.photos(function(photos) {
        photos.forEach(function(photo) {
          var id = photo.id;
          Photos.thumbnail(id, function(data) {
            var blob = new Blob([data], {"type":"image/jpeg"});
            var domURL = window.URL || window.webkitURL;
            //image = "<div class='imgHolder'><img class='img' src='"+domURL.createObjectURL(blob)+"' style='margin: 5px' /></div>";
            image = $("<img>");
            image.src = domURL.createObjectURL(blob);
            $(image).appendTo($("#images"));
          })
        })
      }, function(err) {
        console.log(err);
      })
    })
    /*
  }
})
*/
